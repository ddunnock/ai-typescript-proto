{"version":3,"sources":["../src/specialized/orchestrator-agent.ts","../src/specialized/email-agent.ts","../src/specialized/notes-agent.ts","../src/specialized/document-agent.ts","../src/specialized/research-agent.ts"],"names":[],"mappings":"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","file":"chunk-PR52YFQA.js","sourcesContent":["import { StateGraph, END, START } from \"@langchain/langgraph\";\r\nimport {\r\n    type AgentConfig,\r\n    type Message,\r\n    createMessage,\r\n    createAgentEvent,\r\n    type AgentEvent,\r\n} from \"@repo/shared\";\r\nimport type { BaseProvider } from \"@repo/providers\";\r\nimport { BaseAgent } from \"../base\";\r\nimport { AgentStateAnnotation, type AgentState } from \"../state\";\r\n\r\ninterface SubAgentConfig {\r\n    name: string;\r\n    description: string;\r\n    agent: BaseAgent;\r\n}\r\n\r\nexport class OrchestratorAgent extends BaseAgent {\r\n    private subAgents: Map<string, SubAgentConfig> = new Map();\r\n\r\n    constructor(provider: BaseProvider, config?: Partial<AgentConfig>) {\r\n        super(provider, {\r\n            ...config,\r\n            type: \"orchestrator\",\r\n            name: config?.name ?? \"Orchestrator\",\r\n            description: config?.description ?? \"Multi-agent coordinator that routes to specialized agents\",\r\n        });\r\n    }\r\n\r\n    registerSubAgent(name: string, description: string, agent: BaseAgent): void {\r\n        this.subAgents.set(name, { name, description, agent });\r\n    }\r\n\r\n    unregisterSubAgent(name: string): void {\r\n        this.subAgents.delete(name);\r\n    }\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    protected override buildGraph(): any {\r\n        const workflow = new StateGraph(AgentStateAnnotation)\r\n            .addNode(\"initialize\", this.initializeNode.bind(this))\r\n            .addNode(\"analyze\", this.analyzeNode.bind(this))\r\n            .addNode(\"delegate\", this.delegateNode.bind(this))\r\n            .addNode(\"synthesize\", this.synthesizeNode.bind(this))\r\n            .addNode(\"finalize\", this.finalizeNode.bind(this))\r\n            .addEdge(START, \"initialize\")\r\n            .addEdge(\"initialize\", \"analyze\")\r\n            .addConditionalEdges(\"analyze\", this.routeFromAnalyze.bind(this), {\r\n                delegate: \"delegate\",\r\n                synthesize: \"synthesize\",\r\n            })\r\n            .addEdge(\"delegate\", \"synthesize\")\r\n            .addEdge(\"synthesize\", \"finalize\")\r\n            .addEdge(\"finalize\", END);\r\n\r\n        return workflow.compile();\r\n    }\r\n\r\n    protected async analyzeNode(state: AgentState): Promise<Partial<AgentState>> {\r\n        const agentDescriptions = Array.from(this.subAgents.entries())\r\n            .map(([name, config]) => `- ${name}: ${config.description}`)\r\n            .join(\"\\n\");\r\n\r\n        const analysisPrompt = `You are an orchestrator that coordinates specialized agents.\r\n\r\nAvailable agents:\r\n${agentDescriptions || \"No specialized agents registered.\"}\r\n\r\nBased on the user's request, determine:\r\n1. Which agent(s) should handle this request\r\n2. What specific query to send to each agent\r\n\r\nRespond in JSON format:\r\n{\r\n  \"delegation\": [\r\n    { \"agent\": \"agent_name\", \"query\": \"specific query for this agent\" }\r\n  ],\r\n  \"directResponse\": null or \"response if no delegation needed\"\r\n}\r\n\r\nIf the request doesn't require any specialized agent, provide a direct response.\r\nIf no agents are available, explain that no specialized agents are configured.`;\r\n\r\n        const messages: Message[] = [\r\n            createMessage(\"system\", analysisPrompt),\r\n            ...state.messages,\r\n        ];\r\n\r\n        try {\r\n            const response = await this.provider.generate(messages, {\r\n                temperature: 0.3,\r\n                maxTokens: 1024,\r\n            });\r\n\r\n            let analysis: {\r\n                delegation?: Array<{ agent: string; query: string }>;\r\n                directResponse?: string | null;\r\n            };\r\n\r\n            try {\r\n                const jsonMatch = response.content.match(/\\{[\\s\\S]*\\}/);\r\n                analysis = jsonMatch ? JSON.parse(jsonMatch[0]) : { directResponse: response.content };\r\n            } catch {\r\n                analysis = { directResponse: response.content };\r\n            }\r\n\r\n            return {\r\n                status: \"thinking\",\r\n                context: {\r\n                    ...state.context,\r\n                    analysis,\r\n                    delegations: analysis.delegation ?? [],\r\n                    directResponse: analysis.directResponse,\r\n                },\r\n            };\r\n        } catch (error) {\r\n            return {\r\n                error: (error as Error).message,\r\n                status: \"error\",\r\n            };\r\n        }\r\n    }\r\n\r\n    protected async delegateNode(state: AgentState): Promise<Partial<AgentState>> {\r\n        const delegations = state.context.delegations as Array<{ agent: string; query: string }> | undefined;\r\n\r\n        if (!delegations || delegations.length === 0) {\r\n            return { status: \"thinking\" };\r\n        }\r\n\r\n        const delegationResults: Array<{ agent: string; query: string; response: string }> = [];\r\n\r\n        for (const delegation of delegations) {\r\n            const subAgentConfig = this.subAgents.get(delegation.agent);\r\n\r\n            if (!subAgentConfig) {\r\n                delegationResults.push({\r\n                    agent: delegation.agent,\r\n                    query: delegation.query,\r\n                    response: `Agent \"${delegation.agent}\" not found`,\r\n                });\r\n                continue;\r\n            }\r\n\r\n            try {\r\n                const response = await subAgentConfig.agent.process(delegation.query);\r\n                delegationResults.push({\r\n                    agent: delegation.agent,\r\n                    query: delegation.query,\r\n                    response,\r\n                });\r\n            } catch (error) {\r\n                delegationResults.push({\r\n                    agent: delegation.agent,\r\n                    query: delegation.query,\r\n                    response: `Error: ${(error as Error).message}`,\r\n                });\r\n            }\r\n        }\r\n\r\n        return {\r\n            status: \"thinking\",\r\n            context: {\r\n                ...state.context,\r\n                delegationResults,\r\n            },\r\n        };\r\n    }\r\n\r\n    protected async synthesizeNode(state: AgentState): Promise<Partial<AgentState>> {\r\n        const directResponse = state.context.directResponse as string | undefined;\r\n        const delegationResults = state.context.delegationResults as Array<{\r\n            agent: string;\r\n            query: string;\r\n            response: string;\r\n        }> | undefined;\r\n\r\n        if (directResponse) {\r\n            return {\r\n                messages: [createMessage(\"assistant\", directResponse)],\r\n                status: \"complete\",\r\n            };\r\n        }\r\n\r\n        if (!delegationResults || delegationResults.length === 0) {\r\n            return {\r\n                messages: [createMessage(\"assistant\", \"I couldn't process your request.\")],\r\n                status: \"complete\",\r\n            };\r\n        }\r\n\r\n        if (delegationResults.length === 1 && delegationResults[0]) {\r\n            return {\r\n                messages: [createMessage(\"assistant\", delegationResults[0].response)],\r\n                status: \"complete\",\r\n            };\r\n        }\r\n\r\n        const synthesisPrompt = `You received responses from multiple specialized agents.\r\nSynthesize these into a cohesive response for the user.\r\n\r\nAgent responses:\r\n${delegationResults.map((r) => `[${r.agent}]: ${r.response}`).join(\"\\n\\n\")}\r\n\r\nProvide a unified, helpful response that combines the insights from all agents.`;\r\n\r\n        const messages: Message[] = [\r\n            createMessage(\"system\", synthesisPrompt),\r\n            ...state.messages,\r\n        ];\r\n\r\n        try {\r\n            const response = await this.provider.generate(messages, {\r\n                temperature: 0.5,\r\n                maxTokens: 2048,\r\n            });\r\n\r\n            return {\r\n                messages: [createMessage(\"assistant\", response.content)],\r\n                status: \"complete\",\r\n            };\r\n        } catch (error) {\r\n            const fallbackResponse = delegationResults\r\n                .map((r) => `**${r.agent}**: ${r.response}`)\r\n                .join(\"\\n\\n\");\r\n\r\n            return {\r\n                messages: [createMessage(\"assistant\", fallbackResponse)],\r\n                status: \"complete\",\r\n            };\r\n        }\r\n    }\r\n\r\n    protected routeFromAnalyze(state: AgentState): \"delegate\" | \"synthesize\" {\r\n        const delegations = state.context.delegations as Array<unknown> | undefined;\r\n        if (delegations && delegations.length > 0) {\r\n            return \"delegate\";\r\n        }\r\n        return \"synthesize\";\r\n    }\r\n\r\n    protected override getSystemPrompt(): string {\r\n        return `You are an AI orchestrator coordinating specialized agents for email, notes, documents, and research tasks.`;\r\n    }\r\n\r\n    override async *streamProcess(query: string): AsyncIterable<AgentEvent> {\r\n        const initialState: Partial<AgentState> = {\r\n            messages: [createMessage(\"user\", query)],\r\n        };\r\n\r\n        const stream = await this.graph.stream(initialState);\r\n\r\n        for await (const event of stream) {\r\n            const [nodeName, nodeState] = Object.entries(event)[0] ?? [];\r\n\r\n            if (!nodeName || !nodeState) continue;\r\n\r\n            const state = nodeState as Partial<AgentState>;\r\n\r\n            switch (nodeName) {\r\n                case \"initialize\":\r\n                    yield createAgentEvent(\"thinking\", \"Analyzing request...\", this.config.type);\r\n                    break;\r\n                case \"analyze\":\r\n                    yield createAgentEvent(\"thinking\", \"Determining which agents to use...\", this.config.type);\r\n                    break;\r\n                case \"delegate\":\r\n                    yield createAgentEvent(\"thinking\", \"Delegating to specialized agents...\", this.config.type);\r\n                    break;\r\n                case \"synthesize\":\r\n                    if (state.messages && state.messages.length > 0) {\r\n                        const lastMsg = state.messages[state.messages.length - 1];\r\n                        yield createAgentEvent(\"response\", lastMsg?.content, this.config.type);\r\n                    }\r\n                    break;\r\n                case \"finalize\":\r\n                    yield createAgentEvent(\"complete\", null, this.config.type);\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n\r\n    get registeredAgents(): string[] {\r\n        return Array.from(this.subAgents.keys());\r\n    }\r\n}\r\n","import { type AgentConfig, createMessage, type Message } from \"@repo/shared\";\r\nimport type { BaseProvider } from \"@repo/providers\";\r\nimport { BaseAgent } from \"../base\";\r\nimport type { AgentState } from \"../state\";\r\n\r\nexport class EmailAgent extends BaseAgent {\r\n    constructor(provider: BaseProvider, config?: Partial<AgentConfig>) {\r\n        super(provider, {\r\n            ...config,\r\n            type: \"email\",\r\n            name: config?.name ?? \"Email Agent\",\r\n            description: config?.description ?? \"Handles email categorization, summarization, and response drafting\",\r\n        });\r\n    }\r\n\r\n    protected override getSystemPrompt(): string {\r\n        return `You are an AI assistant specialized in email management.\r\n\r\nYour capabilities include:\r\n1. **Categorization**: Classify emails by type (work, personal, newsletter, promotional, urgent, etc.)\r\n2. **Summarization**: Create concise summaries of email threads\r\n3. **Response Drafting**: Help compose professional email responses\r\n4. **Priority Assessment**: Identify urgent or important emails\r\n5. **Action Extraction**: Identify action items and deadlines from emails\r\n\r\nWhen analyzing emails:\r\n- Be concise but thorough\r\n- Maintain professional tone\r\n- Identify key information: sender, subject, urgency, required actions\r\n- For response drafts, match the formality level of the original\r\n\r\nAvailable tools allow you to:\r\n- Search for related emails semantically\r\n- Find similar correspondence patterns\r\n- Generate embeddings for email content`;\r\n    }\r\n\r\n    async categorize(emailContent: string): Promise<{\r\n        category: string;\r\n        confidence: number;\r\n        labels: string[];\r\n    }> {\r\n        const prompt = `Categorize this email and provide labels.\r\n\r\nEmail:\r\n${emailContent}\r\n\r\nRespond in JSON format:\r\n{\r\n  \"category\": \"primary category\",\r\n  \"confidence\": 0.0-1.0,\r\n  \"labels\": [\"label1\", \"label2\"]\r\n}\r\n\r\nCategories: work, personal, newsletter, promotional, transactional, social, urgent, spam`;\r\n\r\n        const response = await this.process(prompt);\r\n\r\n        try {\r\n            const jsonMatch = response.match(/\\{[\\s\\S]*\\}/);\r\n            return jsonMatch\r\n                ? JSON.parse(jsonMatch[0])\r\n                : { category: \"unknown\", confidence: 0.5, labels: [] };\r\n        } catch {\r\n            return { category: \"unknown\", confidence: 0.5, labels: [] };\r\n        }\r\n    }\r\n\r\n    async summarize(emailThread: string): Promise<string> {\r\n        const prompt = `Summarize this email thread concisely:\r\n\r\n${emailThread}\r\n\r\nProvide:\r\n1. Main topic/purpose\r\n2. Key points discussed\r\n3. Any decisions made\r\n4. Outstanding action items`;\r\n\r\n        return this.process(prompt);\r\n    }\r\n\r\n    async draftResponse(originalEmail: string, intent: string): Promise<string> {\r\n        const prompt = `Draft a response to this email.\r\n\r\nOriginal email:\r\n${originalEmail}\r\n\r\nUser's intent: ${intent}\r\n\r\nWrite a professional response that:\r\n1. Addresses all points in the original email\r\n2. Matches the formality level\r\n3. Is clear and concise`;\r\n\r\n        return this.process(prompt);\r\n    }\r\n\r\n    async extractActions(emailContent: string): Promise<Array<{\r\n        action: string;\r\n        deadline?: string;\r\n        priority: \"high\" | \"medium\" | \"low\";\r\n    }>> {\r\n        const prompt = `Extract action items from this email:\r\n\r\n${emailContent}\r\n\r\nRespond in JSON format:\r\n{\r\n  \"actions\": [\r\n    { \"action\": \"description\", \"deadline\": \"date or null\", \"priority\": \"high|medium|low\" }\r\n  ]\r\n}`;\r\n\r\n        const response = await this.process(prompt);\r\n\r\n        try {\r\n            const jsonMatch = response.match(/\\{[\\s\\S]*\\}/);\r\n            const parsed = jsonMatch ? JSON.parse(jsonMatch[0]) : { actions: [] };\r\n            return parsed.actions ?? [];\r\n        } catch {\r\n            return [];\r\n        }\r\n    }\r\n}\r\n","import { type AgentConfig } from \"@repo/shared\";\r\nimport type { BaseProvider } from \"@repo/providers\";\r\nimport { BaseAgent } from \"../base\";\r\n\r\nexport class NotesAgent extends BaseAgent {\r\n    constructor(provider: BaseProvider, config?: Partial<AgentConfig>) {\r\n        super(provider, {\r\n            ...config,\r\n            type: \"notes\",\r\n            name: config?.name ?? \"Notes Agent\",\r\n            description: config?.description ?? \"Handles note-taking, retrieval, and knowledge linking\",\r\n        });\r\n    }\r\n\r\n    protected override getSystemPrompt(): string {\r\n        return `You are an AI assistant specialized in note-taking and knowledge management.\r\n\r\nYour capabilities include:\r\n1. **Note Creation**: Help structure and organize new notes\r\n2. **Note Retrieval**: Find relevant notes based on semantic similarity\r\n3. **Knowledge Linking**: Suggest connections between notes\r\n4. **Summarization**: Create summaries of note collections\r\n5. **Tagging**: Suggest appropriate tags and categories\r\n6. **Outline Generation**: Create structured outlines from ideas\r\n\r\nWhen working with notes:\r\n- Preserve the user's voice and style\r\n- Suggest logical organization structures\r\n- Identify related concepts and potential links\r\n- Use clear, hierarchical formatting when appropriate\r\n\r\nAvailable tools allow you to:\r\n- Search notes semantically\r\n- Find similar content across your knowledge base\r\n- Generate embeddings for note content`;\r\n    }\r\n\r\n    async createNote(content: string, context?: string): Promise<{\r\n        title: string;\r\n        formattedContent: string;\r\n        suggestedTags: string[];\r\n        relatedTopics: string[];\r\n    }> {\r\n        const prompt = `Help structure this note content:\r\n\r\n${content}\r\n${context ? `\\nContext: ${context}` : \"\"}\r\n\r\nRespond in JSON format:\r\n{\r\n  \"title\": \"suggested title\",\r\n  \"formattedContent\": \"formatted markdown content\",\r\n  \"suggestedTags\": [\"tag1\", \"tag2\"],\r\n  \"relatedTopics\": [\"topic1\", \"topic2\"]\r\n}`;\r\n\r\n        const response = await this.process(prompt);\r\n\r\n        try {\r\n            const jsonMatch = response.match(/\\{[\\s\\S]*\\}/);\r\n            return jsonMatch\r\n                ? JSON.parse(jsonMatch[0])\r\n                : {\r\n                      title: \"Untitled Note\",\r\n                      formattedContent: content,\r\n                      suggestedTags: [],\r\n                      relatedTopics: [],\r\n                  };\r\n        } catch {\r\n            return {\r\n                title: \"Untitled Note\",\r\n                formattedContent: content,\r\n                suggestedTags: [],\r\n                relatedTopics: [],\r\n            };\r\n        }\r\n    }\r\n\r\n    async summarizeNotes(notes: string[]): Promise<string> {\r\n        const prompt = `Summarize these notes into a cohesive overview:\r\n\r\n${notes.map((n, i) => `--- Note ${i + 1} ---\\n${n}`).join(\"\\n\\n\")}\r\n\r\nProvide:\r\n1. Main themes across the notes\r\n2. Key insights\r\n3. Connections between notes\r\n4. Areas that could use more development`;\r\n\r\n        return this.process(prompt);\r\n    }\r\n\r\n    async suggestLinks(noteContent: string, availableNotes: string[]): Promise<Array<{\r\n        noteIndex: number;\r\n        relevance: string;\r\n        suggestedLinkText: string;\r\n    }>> {\r\n        const prompt = `Find connections between this note and the available notes:\r\n\r\nCurrent note:\r\n${noteContent}\r\n\r\nAvailable notes:\r\n${availableNotes.map((n, i) => `[${i}]: ${n.substring(0, 200)}...`).join(\"\\n\")}\r\n\r\nRespond in JSON format:\r\n{\r\n  \"links\": [\r\n    { \"noteIndex\": 0, \"relevance\": \"why these are related\", \"suggestedLinkText\": \"text for the link\" }\r\n  ]\r\n}`;\r\n\r\n        const response = await this.process(prompt);\r\n\r\n        try {\r\n            const jsonMatch = response.match(/\\{[\\s\\S]*\\}/);\r\n            const parsed = jsonMatch ? JSON.parse(jsonMatch[0]) : { links: [] };\r\n            return parsed.links ?? [];\r\n        } catch {\r\n            return [];\r\n        }\r\n    }\r\n\r\n    async generateOutline(topic: string, depth: number = 3): Promise<string> {\r\n        const prompt = `Create a structured outline for the topic: \"${topic}\"\r\n\r\nRequirements:\r\n- Maximum depth: ${depth} levels\r\n- Include key subtopics\r\n- Use clear hierarchical formatting\r\n- Add brief descriptions where helpful`;\r\n\r\n        return this.process(prompt);\r\n    }\r\n}\r\n","import { type AgentConfig } from \"@repo/shared\";\r\nimport type { BaseProvider } from \"@repo/providers\";\r\nimport { BaseAgent } from \"../base\";\r\n\r\nexport class DocumentAgent extends BaseAgent {\r\n    constructor(provider: BaseProvider, config?: Partial<AgentConfig>) {\r\n        super(provider, {\r\n            ...config,\r\n            type: \"document\",\r\n            name: config?.name ?? \"Document Agent\",\r\n            description: config?.description ?? \"Handles document Q&A, summarization, and analysis\",\r\n        });\r\n    }\r\n\r\n    protected override getSystemPrompt(): string {\r\n        return `You are an AI assistant specialized in document analysis and question-answering.\r\n\r\nYour capabilities include:\r\n1. **Document Q&A**: Answer questions based on document content\r\n2. **Summarization**: Create executive summaries of documents\r\n3. **Key Point Extraction**: Identify main arguments and conclusions\r\n4. **Comparison**: Compare and contrast multiple documents\r\n5. **Citation**: Reference specific sections when answering\r\n6. **Structure Analysis**: Understand document organization\r\n\r\nWhen analyzing documents:\r\n- Be precise and cite relevant sections\r\n- Distinguish between what the document says vs. inference\r\n- Acknowledge limitations in the available information\r\n- Use direct quotes when appropriate\r\n\r\nAvailable tools allow you to:\r\n- Search document content semantically\r\n- Find similar passages across documents\r\n- Generate embeddings for document sections`;\r\n    }\r\n\r\n    async answerQuestion(document: string, question: string): Promise<{\r\n        answer: string;\r\n        confidence: \"high\" | \"medium\" | \"low\";\r\n        relevantPassages: string[];\r\n    }> {\r\n        const prompt = `Answer this question based on the document:\r\n\r\nDocument:\r\n${document}\r\n\r\nQuestion: ${question}\r\n\r\nRespond in JSON format:\r\n{\r\n  \"answer\": \"your answer\",\r\n  \"confidence\": \"high|medium|low\",\r\n  \"relevantPassages\": [\"relevant quote 1\", \"relevant quote 2\"]\r\n}\r\n\r\nIf the answer cannot be found in the document, say so clearly.`;\r\n\r\n        const response = await this.process(prompt);\r\n\r\n        try {\r\n            const jsonMatch = response.match(/\\{[\\s\\S]*\\}/);\r\n            return jsonMatch\r\n                ? JSON.parse(jsonMatch[0])\r\n                : {\r\n                      answer: response,\r\n                      confidence: \"low\" as const,\r\n                      relevantPassages: [],\r\n                  };\r\n        } catch {\r\n            return {\r\n                answer: response,\r\n                confidence: \"low\",\r\n                relevantPassages: [],\r\n            };\r\n        }\r\n    }\r\n\r\n    async summarize(document: string, options?: {\r\n        style?: \"executive\" | \"detailed\" | \"bullet\";\r\n        maxLength?: number;\r\n    }): Promise<string> {\r\n        const style = options?.style ?? \"executive\";\r\n        const maxLength = options?.maxLength ?? 500;\r\n\r\n        const prompt = `Summarize this document in ${style} style (max ~${maxLength} words):\r\n\r\n${document}\r\n\r\n${style === \"executive\" ? \"Focus on key decisions, conclusions, and action items.\" : \"\"}\r\n${style === \"bullet\" ? \"Use bullet points for key information.\" : \"\"}\r\n${style === \"detailed\" ? \"Include supporting details and context.\" : \"\"}`;\r\n\r\n        return this.process(prompt);\r\n    }\r\n\r\n    async extractKeyPoints(document: string): Promise<Array<{\r\n        point: string;\r\n        importance: \"critical\" | \"important\" | \"supporting\";\r\n        location?: string;\r\n    }>> {\r\n        const prompt = `Extract key points from this document:\r\n\r\n${document}\r\n\r\nRespond in JSON format:\r\n{\r\n  \"keyPoints\": [\r\n    { \"point\": \"key point text\", \"importance\": \"critical|important|supporting\", \"location\": \"section/page if identifiable\" }\r\n  ]\r\n}`;\r\n\r\n        const response = await this.process(prompt);\r\n\r\n        try {\r\n            const jsonMatch = response.match(/\\{[\\s\\S]*\\}/);\r\n            const parsed = jsonMatch ? JSON.parse(jsonMatch[0]) : { keyPoints: [] };\r\n            return parsed.keyPoints ?? [];\r\n        } catch {\r\n            return [];\r\n        }\r\n    }\r\n\r\n    async compare(documents: string[]): Promise<{\r\n        similarities: string[];\r\n        differences: string[];\r\n        synthesis: string;\r\n    }> {\r\n        const prompt = `Compare these documents:\r\n\r\n${documents.map((d, i) => `--- Document ${i + 1} ---\\n${d}`).join(\"\\n\\n\")}\r\n\r\nRespond in JSON format:\r\n{\r\n  \"similarities\": [\"common point 1\", \"common point 2\"],\r\n  \"differences\": [\"difference 1\", \"difference 2\"],\r\n  \"synthesis\": \"overall synthesis of the documents\"\r\n}`;\r\n\r\n        const response = await this.process(prompt);\r\n\r\n        try {\r\n            const jsonMatch = response.match(/\\{[\\s\\S]*\\}/);\r\n            return jsonMatch\r\n                ? JSON.parse(jsonMatch[0])\r\n                : {\r\n                      similarities: [],\r\n                      differences: [],\r\n                      synthesis: response,\r\n                  };\r\n        } catch {\r\n            return {\r\n                similarities: [],\r\n                differences: [],\r\n                synthesis: response,\r\n            };\r\n        }\r\n    }\r\n}\r\n","import { type AgentConfig } from \"@repo/shared\";\r\nimport type { BaseProvider } from \"@repo/providers\";\r\nimport { BaseAgent } from \"../base\";\r\n\r\nexport class ResearchAgent extends BaseAgent {\r\n    constructor(provider: BaseProvider, config?: Partial<AgentConfig>) {\r\n        super(provider, {\r\n            ...config,\r\n            type: \"research\",\r\n            name: config?.name ?? \"Research Agent\",\r\n            description: config?.description ?? \"Handles research tasks, information gathering, and synthesis\",\r\n        });\r\n    }\r\n\r\n    protected override getSystemPrompt(): string {\r\n        return `You are an AI research assistant specialized in gathering, analyzing, and synthesizing information.\r\n\r\nYour capabilities include:\r\n1. **Information Gathering**: Collect relevant information on topics\r\n2. **Analysis**: Evaluate sources and identify key findings\r\n3. **Synthesis**: Combine information from multiple sources\r\n4. **Report Generation**: Create structured research reports\r\n5. **Fact Verification**: Cross-reference claims across sources\r\n6. **Gap Identification**: Find areas needing more research\r\n\r\nWhen conducting research:\r\n- Be thorough and systematic\r\n- Cite sources and note confidence levels\r\n- Distinguish facts from opinions\r\n- Identify contradictions between sources\r\n- Note limitations and areas of uncertainty\r\n\r\nAvailable tools allow you to:\r\n- Search your knowledge base semantically\r\n- Find similar content and patterns\r\n- Generate embeddings for research content`;\r\n    }\r\n\r\n    async research(topic: string, options?: {\r\n        depth?: \"quick\" | \"standard\" | \"comprehensive\";\r\n        focus?: string[];\r\n    }): Promise<{\r\n        summary: string;\r\n        keyFindings: string[];\r\n        sources: string[];\r\n        furtherResearch: string[];\r\n    }> {\r\n        const depth = options?.depth ?? \"standard\";\r\n        const focus = options?.focus?.join(\", \") ?? \"general overview\";\r\n\r\n        const prompt = `Research the topic: \"${topic}\"\r\n\r\nDepth: ${depth}\r\nFocus areas: ${focus}\r\n\r\nRespond in JSON format:\r\n{\r\n  \"summary\": \"comprehensive summary\",\r\n  \"keyFindings\": [\"finding 1\", \"finding 2\"],\r\n  \"sources\": [\"source 1\", \"source 2\"],\r\n  \"furtherResearch\": [\"suggested area 1\", \"suggested area 2\"]\r\n}`;\r\n\r\n        const response = await this.process(prompt);\r\n\r\n        try {\r\n            const jsonMatch = response.match(/\\{[\\s\\S]*\\}/);\r\n            return jsonMatch\r\n                ? JSON.parse(jsonMatch[0])\r\n                : {\r\n                      summary: response,\r\n                      keyFindings: [],\r\n                      sources: [],\r\n                      furtherResearch: [],\r\n                  };\r\n        } catch {\r\n            return {\r\n                summary: response,\r\n                keyFindings: [],\r\n                sources: [],\r\n                furtherResearch: [],\r\n            };\r\n        }\r\n    }\r\n\r\n    async synthesize(sources: Array<{ title: string; content: string }>): Promise<{\r\n        synthesis: string;\r\n        agreements: string[];\r\n        contradictions: string[];\r\n        gaps: string[];\r\n    }> {\r\n        const prompt = `Synthesize these sources:\r\n\r\n${sources.map((s, i) => `--- ${s.title} ---\\n${s.content}`).join(\"\\n\\n\")}\r\n\r\nRespond in JSON format:\r\n{\r\n  \"synthesis\": \"unified synthesis of all sources\",\r\n  \"agreements\": [\"point sources agree on\"],\r\n  \"contradictions\": [\"point sources disagree on\"],\r\n  \"gaps\": [\"information that's missing\"]\r\n}`;\r\n\r\n        const response = await this.process(prompt);\r\n\r\n        try {\r\n            const jsonMatch = response.match(/\\{[\\s\\S]*\\}/);\r\n            return jsonMatch\r\n                ? JSON.parse(jsonMatch[0])\r\n                : {\r\n                      synthesis: response,\r\n                      agreements: [],\r\n                      contradictions: [],\r\n                      gaps: [],\r\n                  };\r\n        } catch {\r\n            return {\r\n                synthesis: response,\r\n                agreements: [],\r\n                contradictions: [],\r\n                gaps: [],\r\n            };\r\n        }\r\n    }\r\n\r\n    async generateReport(topic: string, findings: string[]): Promise<string> {\r\n        const prompt = `Generate a research report on: \"${topic}\"\r\n\r\nKey findings to include:\r\n${findings.map((f, i) => `${i + 1}. ${f}`).join(\"\\n\")}\r\n\r\nCreate a well-structured report with:\r\n1. Executive Summary\r\n2. Introduction\r\n3. Methodology\r\n4. Findings\r\n5. Analysis\r\n6. Conclusions\r\n7. Recommendations\r\n\r\nUse clear headings and professional formatting.`;\r\n\r\n        return this.process(prompt);\r\n    }\r\n\r\n    async verifyFact(claim: string, context?: string): Promise<{\r\n        verdict: \"supported\" | \"partially_supported\" | \"contradicted\" | \"unverifiable\";\r\n        confidence: number;\r\n        explanation: string;\r\n        evidence: string[];\r\n    }> {\r\n        const prompt = `Verify this claim:\r\n\r\nClaim: ${claim}\r\n${context ? `Context: ${context}` : \"\"}\r\n\r\nRespond in JSON format:\r\n{\r\n  \"verdict\": \"supported|partially_supported|contradicted|unverifiable\",\r\n  \"confidence\": 0.0-1.0,\r\n  \"explanation\": \"why this verdict\",\r\n  \"evidence\": [\"supporting evidence 1\", \"supporting evidence 2\"]\r\n}\r\n\r\nBe honest about uncertainty.`;\r\n\r\n        const response = await this.process(prompt);\r\n\r\n        try {\r\n            const jsonMatch = response.match(/\\{[\\s\\S]*\\}/);\r\n            return jsonMatch\r\n                ? JSON.parse(jsonMatch[0])\r\n                : {\r\n                      verdict: \"unverifiable\" as const,\r\n                      confidence: 0.5,\r\n                      explanation: response,\r\n                      evidence: [],\r\n                  };\r\n        } catch {\r\n            return {\r\n                verdict: \"unverifiable\",\r\n                confidence: 0.5,\r\n                explanation: response,\r\n                evidence: [],\r\n            };\r\n        }\r\n    }\r\n}\r\n"]}